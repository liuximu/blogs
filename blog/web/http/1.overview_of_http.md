<!--
author: 刘青
date: 2016-07-27
title: HTTP概述
tags: 
type: note
category: web/http
status: publish
summary:
-->
---------------
> Q： HTTP是什么？

超文本传输协议（Hypertext Transfer Protocol），世界上所有的浏览器、服务器和相关的web应用都通过其进行交流，HTTP是当代互联网的公共语言，web的基础。

---------------
> Q： HTTP可靠么？

数以万计的图片，HTML文件，文本或者电影以及音频都通过HTTP从服务器传输到用户的浏览器，HTTP是一个可靠的数据传输协议，它保证你的数据在传输过程中不会被损坏。

---------------
> Q： web客户端和服务器是什么？

Web服务器因为使用HTTP协议，所以常常被称作HTTP服务器，保存互联网数据已经对HTTP客户端的请求进行响应。
Web客户端我们日常最常用的就是浏览器。浏览器请求HTTP对象并进行呈现。
当我们浏览一个网页时，浏览器先发送一个HTTP请求给服务器，服务器对请求进行响应，包括响应对象的类型、长度和其他信息。

---------------
> Q： 资源指的是什么？

资源是一切内容的基础。web服务器组织web资源。web资源是web内容的基础。
资源能是静态的，比如文件系统上的一个文件；
资源能是动态的，可能由软件程序动态的生成。

---------------
> Q： 媒体类型是什么？

互联网中有成千上万种数据类型，HTTP对每种数据将被传输的类型都使用`MIME type`进行标注。
MIME（Multipurpose Internet Mail Extensions）（多用途互联网邮件扩展）最初是为了解决不同电子邮件系统之间移动信息是出现的问题的。它在邮件系统中的良好表现以至于HTTP将其进行改变来描述自己的多媒体内容。
Web服务器将一个MIME 类型附加到所有的HTTP对象数据中。当浏览器得到其数据以后就可以根据关联的MIME进行处理。
MIME类型以字符串形式呈现，形式为 主类型/子类型，如：text/html， image/jpeg，application/vnd.ms-powerpoint。

---------------
> Q： 资源如何定位

每个服务器资源都有一个名字，这样客户端可以去获取它感兴趣的资源，这个名字叫做 `URIs` (uniform resource identifier)。URIs现在有两种形式： URLs 和 URNs。

`URLs`（uniform resource locator）是最通用的资源定位形式。
对于 http://www.baidu.com/a.c.gif ，它的组成是：

| 项目 |  协议 | 主机位置  | 资源路径 |
| --- | ------| ---- | ---|
| 示例 |   http:// |  www.baidu.com  | /a/c.gif |

`URNs`(uniform resource name) 还是只存在实验室。它想让每个资源有一个唯一的名称，有一台服务器可以对名称和资源进行解析，这样，资源的更换对获取者来说就是透明的。

---------------
> Q： 一次HTTP具体的流程是什么？

一个HTTP的具体流程包括一个请求命令和一个响应结果，通过 `HTTP messages`来传输被格式化的了的数据。

HTTP支持多种请求命令，叫 `HTTP methods`。每个HTTP 请求信息都有一个方法，告诉服务器如何处理请求。
一些常用的 HTTP methods：

| HTTP方法   | 说明 | 
| ------ | -----| 
| GET    | 从服务器发送一个已命名资源给客户端 |
| PUT    | 将客户端的数据存储到服务器已命名资源中 |
| DELETE | 从服务器上删除已命名资源 |
| POST   | 将客户端数据发送到服务器网关应用 |
| HEAD   | 仅返回一个已命名资源的 HTTP head |

每个响应消息都会有一个三位数的状态码，客户端可以自动请求是否成功，或者有其他的行为被要求。

一个应用常常是有多个请求组合而成的。比如浏览器，其实会处理一系列的HTTP事务来获取和展现一个页面。

---------------
> Q： HTTP消息的结构是什么样的？

HTTP消息一共有两类：
- 从客户端发出来的是 请求消息；
- 从服务端发出来的是 响应消息。

HTTP消息的结构是面对行数据的。文本形式，人眼可读，比较简单，包括：

| 消息组成  |  请求消息示例 | 响应消息示例 | 说明 |
| ---| ----- | ---| ---|
|Start line（第一行）| GET /test/a.html HTTP/1.0 |HTTP/1.0 200 OK | 表明请求或响应发生了什么
|Header fields（头部字段）| Accept:text/* <br> Accept-Language: en,for |Content-type: text/plain<br> Content-length: 19 | 每个头字段为 key:value，最后一定加一个空行 |
|Body（消息体）|  | Hi I'm a message ! | 空行后面是可选的消息体，可以包含任何类型的数据发生给服务器或者响应给客户端，可以是非文本 |

---------------
> Q： HTTP消息是如何进行数据传输的？

HTTP使用TCP(Transmission Control Protocol)连接进行数据的传递。HTTP是应用层的协议，不考虑网络的具体细节。

HTTP客户端和服务器之间要先使用 Internet protocol(IP)地址和端口号建立联系才能使用 TCP/IP来通信。客户端通过URLs来获取IP和端口号，大致过程为：
1. 浏览器从URL中解析出服务器的主机名；
2. 浏览器将主机名转换为IP地址；
3. 浏览器从URL中解析出端口号；
4. 浏览器和服务器之间建立 TCP 连接；
5. 浏览器发送 HTTP请求消息 给服务器；
6. 服务器发送 HTTP响应消息 给浏览器；
7. 连接关闭，浏览器展示数据。

---------------
> Q： HTTP协议有哪些版本呢？

今天我们使用的HTTP协议确实有几个版本，HTTP应用需要对这些版本进行兼容处理，大概有：

| 版本    | 时间 | 说明 | 
| --- | --- | ---|
|  HTTP/0.9  | 1991 | 设计上有重大缺陷，不宜使用 |
|  HTTP/1.0  |  | 第一个被广泛部署的HTTP协议。是学术和商业的最佳实践的结晶。|
|  HTTP/1.0+ | 1995± | 被添加了许多非官方的、事实上的标准，比如：超链接、代理连接  |
|  HTTP/1.1  |  | 修正架构缺陷，提高性能，移除错误的特性 |
|  HTTP-NG HTTP/2.0  | 1998 | 提高性能，但是没有打算作为替代版本进行提出 |

---------------
> Q： Web 有哪些架构组件？

| 组件 | 说明 |
| --- | ----|
| 代理 Proxies  | 客户端和服务器端之间的媒介。代理接收客户端请求再发给服务器，再将响应返回给客户端。代理常常用来处理安全问题，应用集成和性能调优，也可以用来过滤请求和响应。  |
| 缓存 Caches | web cache 或者 caching proxy 是一种特别的HTTP代理。它对流行的文件在通过代理时保存副本，这样客户端就可以就近快速的下载文件副本。 |
| 网关 Gateways | 网关常常在不同的服务组件充当媒介，将HTTP转换为其他的协议，比如：HTTP/FTP网关收到一个FTP的URIs的HTTP请求，它使用FTP协议将资源拿到再返回给客户端。网关也常常作为资源的源服务器。 |
|隧道 Tunnels| 隧道保证将数据的传输是透明的，HTTP隧道常常被永安里传输非HTTP数据。一个流行的用法是通过HTTP连接传输加密的 Secure Sockets Layer（SSL）。|
| 客户端 Agents | 处理web请求的都是HTTP代理，它能够根据用户的行为发送HTTP请求。最常见的代理就是浏览器。其他的例子是“spiders”或“web robots”自动得获取数据。 |

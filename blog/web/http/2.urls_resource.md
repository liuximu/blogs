<!--
author: 刘青
date: 2016-07-29
title: URLs 和 资源
tags: 
type: note
category: web/http
status: publish
summary:
-->

---------------
> Q：URLs和资源有什么关系？

前面我们简要的说明了URL是什么，它指明资源的所在地以及与其交互的方式。举一个现实世界的列子：你要来我家，我会告诉你地址。这个地址就是URL（统一资源定位符），有了它你就可以找到我家了。

---------------
> Q：URL语法是什么？

URL是有一个通用的语法的，它包括9部分：

| 组成部分|  描述  | 默认值| 示例值 |
| ------ | ------| ---- | ---- |
|scheme 机制  | 使用的访问数据库的协议 | None | http |
|user 用户    | 一些机制要求有用户名 |anonymous |  |
|password 密码| 一些机制要求有密码，在用户名后面，用 `:` 分隔 | | |
|host 主机  	 | 拥有资源的主机的主机名或IP	|  | www.baidu.com |
|port 端口  	 | 服务器监听的端口号 | 不同的机制不同 | 80 |
|path 路径    | 资源在服务器上本地路径 | None | /a/b.html |
|params 参数  | 指定入参，为键值对，用`;`和URL其他部分分隔 | | |
|query 查询参数| 指定参数，为键值对，用`?`和URL其他部分分隔 | | c=12&d=22 |
|fragment 片段  | `#`后面的内容，不会被传递到服务器，仅供客户端使用 | | ddd |

承上，我们有一个URL为： http://www.baidu.com:80/a/b.html?c=12&d=22#ddd

---------------
> Q：URL简写是什么东东？

URL其实分两类：绝对URL，相对URL。前面将的就是绝对URL语法。URL简写指的是相对URL，它是绝对URL的一部分，对它需要先转换为绝对URL在进行资源定位。

举个例子：在 http://www.baidu.com/c/b.html中有一个超链接为 `<a href="./c.html"/> `，它的绝对URL是：http://www.baidu.com/c/c.html。

上述的列子涉及到 基本URLs （Base URLs） 的概念，也就是相对URL所相对的URL：
- 要是指定了基本URL，就是它。比如 html有 `<BASE>` 标签进行指定；
- 外部资源的基本URLs。要是上面的没有指定，会使用外部文档的基本URL；
- 没有基本URL。要么是绝对URL，要么出错了。

相对URL使用前需要转换为绝对URL，将9部分补全，然后进行资源定位。

---------------
> Q：URL我经常看到中文是乱码的，这个是怎么回事？

- URLs当初的进行轻便设计，希望可以通过多种协议进行数据传输，这意味着能被接受的只有那些公共（US-ASCII）的字符集；
- 另外一方面，URL的设计为可读，意味着一下不可见字符被排除在外；
- 还有一下关键字，比如? ，它有特定的含义。

前面这些原因导致一些字符，比如中文，是不可能通过URL进行传输的。针对这个硬伤提出了编码机制：将其他字符进行转义，让其转变为可传输的字符，服务器得到后再转回去。
中文被转成“乱码”就是这个原因。

---------------
> Q：URL的机制有哪些呢？

最常见的当然是我们天天看到的http，还有：https, moilto, ftp 等等。它们都是和特定的协议挂钩的。

---------------
> Q：URL感觉很完美的样子，真的是这样么？它有什么缺陷呢，有改进措施么？

URL就是资源的位置，它有一个致命的缺陷：将资源和位置进行了绑定。当资源移动了，我们就不能通过URL找到资源了，然而资源实际上是还存在的。

针对这个缺陷，URN（uniform resource name）被提出来了。它的原理是：每个资源有特定的名称，我们根据这个名称找到正在的资源，资源的移动是透明的。但是，兼容性啊，基础建设等原因，这个还只在实验室存在。

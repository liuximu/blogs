
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>路由调用逻辑 · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="刘青, http://liuximu.com">
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-ximu-foot/footer.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-pageview-count/plugin.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-anchor-navigation-ex/style/plugin.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="0202_radix_tree.html" />
    
    
    <link rel="prev" href="0200.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="0001_preface.html">
            
                <a href="0001_preface.html">
            
                    
                    前言
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="0101_flow.html">
            
                <a href="0101_flow.html">
            
                    
                    流程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="0200.html">
            
                <a href="0200.html">
            
                    
                    路由
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.3.1" data-path="0201_router.html">
            
                <a href="0201_router.html">
            
                    
                    路由调用逻辑
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="0202_radix_tree.html">
            
                <a href="0202_radix_tree.html">
            
                    
                    路由内部实现：基树
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="0301_request.html">
            
                <a href="0301_request.html">
            
                    
                    Request
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="0401_response.html">
            
                <a href="0401_response.html">
            
                    
                    Response
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="0501_other.html">
            
                <a href="0501_other.html">
            
                    
                    其他
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="./">
            
                <a href="./">
            
                    
                    NOTHING
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <!--
    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
    -->
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >路由调用逻辑</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <div id="anchor-navigation-ex-navbar"><i class="fa fa-navicon"></i><ul><ul><li><span class="title-icon "></span><a href="#&#x8DEF;&#x7531;api"><b>1.1. </b>&#x8DEF;&#x7531;API</a></li><ul><li><span class="title-icon "></span><a href="#&#x8BBE;&#x7F6E;&#x8DEF;&#x7531;"><b>1.1.1. </b>&#x8BBE;&#x7F6E;&#x8DEF;&#x7531;</a></li><li><span class="title-icon "></span><a href="#routegroup&#x7684;&#x83B7;&#x53D6;"><b>1.1.2. </b>RouteGroup&#x7684;&#x83B7;&#x53D6;</a></li><li><span class="title-icon "></span><a href="#&#x8DEF;&#x7531;&#x7684;&#x547D;&#x4E2D;"><b>1.1.3. </b>&#x8DEF;&#x7531;&#x7684;&#x547D;&#x4E2D;</a></li></ul><li><span class="title-icon "></span><a href="#&#x8DEF;&#x7531;&#x7684;&#x8C03;&#x7528;&#x903B;&#x8F91;"><b>1.2. </b>&#x8DEF;&#x7531;&#x7684;&#x8C03;&#x7528;&#x903B;&#x8F91;</a></li><ul><li><span class="title-icon "></span><a href="#&#x80CC;&#x666F;&#x77E5;&#x8BC6;"><b>1.2.1. </b>&#x80CC;&#x666F;&#x77E5;&#x8BC6;</a></li><li><span class="title-icon "></span><a href="#&#x6DFB;&#x52A0;&#x8DEF;&#x7531;"><b>1.2.2. </b>&#x6DFB;&#x52A0;&#x8DEF;&#x7531;</a></li><li><span class="title-icon "></span><a href="#&#x67E5;&#x627E;&#x8DEF;&#x7531;"><b>1.2.3. </b>&#x67E5;&#x627E;&#x8DEF;&#x7531;</a></li></ul></ul></ul></div><a href="#" id="anchorNavigationExGoTop"><i class="fa fa-arrow-up"></i></a><p> &#x8DEF;&#x7531;&#x8C03;&#x7528;&#x903B;&#x8F91;</p>
<p>gin &#x5BF9;&#x5916;&#x5BA3;&#x4F20;&#x7684;&#x9AD8;&#x6548;&#xFF0C;&#x5F88;&#x5927;&#x4E00;&#x90E8;&#x5206;&#x662F;&#x8BF4;&#x5176;&#x8DEF;&#x7531;&#x6548;&#x7387;&#x3002;&#x672C;&#x6587;&#x5185;&#x5BB9;&#x5305;&#x62EC;&#xFF1A;</p>
<ul>
<li>&#x8DEF;&#x7531;API&#x4ECB;&#x7ECD;</li>
<li>&#x8DEF;&#x7531;&#x8C03;&#x7528;&#x5B9E;&#x73B0;&#x903B;&#x8F91;</li>
<li>&#x8DEF;&#x7531;&#x7684;&#x5185;&#x90E8;&#x5B9E;&#x73B0;</li>
</ul>
<h2 id="&#x8DEF;&#x7531;api"><a name="&#x8DEF;&#x7531;api" class="anchor-navigation-ex-anchor" href="#&#x8DEF;&#x7531;api"><i class="fa fa-link" aria-hidden="true"></i></a>1.1. &#x8DEF;&#x7531;API</h2>
<h3 id="&#x8BBE;&#x7F6E;&#x8DEF;&#x7531;"><a name="&#x8BBE;&#x7F6E;&#x8DEF;&#x7531;" class="anchor-navigation-ex-anchor" href="#&#x8BBE;&#x7F6E;&#x8DEF;&#x7531;"><i class="fa fa-link" aria-hidden="true"></i></a>1.1.1. &#x8BBE;&#x7F6E;&#x8DEF;&#x7531;</h3>
<pre><code>// routergroup.go:20
type IRoutes interface {
    Use(handlers ...HandlerFunc) IRoutes

    Handle(httpMethod, relativePath string, handlers ...HandlerFunc) IRoutes
    Any(relativePath string, handlers ...HandlerFunc) IRoutes
    GET(relativePath string, handlers ...HandlerFunc) IRoutes
    POST(relativePath string, handlers ...HandlerFunc) IRoutes
    DELETE(relativePath string, handlers ...HandlerFunc) IRoutes
    PATCH(relativePath string, handlers ...HandlerFunc) IRoutes
    PUT(relativePath string, handlers ...HandlerFunc) IRoutes
    OPTIONS(relativePath string, handlers ...HandlerFunc) IRoutes
    HEAD(relativePath string, handlers ...HandlerFunc) IRoutes

    StaticFile(relativePath, filepath string) IRoutes
    Static(relativePath, root string) IRoutes
    StaticFS(relativePath string, fs http.FileSystem) IRoutes
}

// routergroup.go:15
type IRouter interface {
    IRoutes
    Group(string, ...HandlerFunc) *RouterGroup
}
</code></pre><h3 id="routegroup&#x7684;&#x83B7;&#x53D6;"><a name="routegroup&#x7684;&#x83B7;&#x53D6;" class="anchor-navigation-ex-anchor" href="#routegroup&#x7684;&#x83B7;&#x53D6;"><i class="fa fa-link" aria-hidden="true"></i></a>1.1.2. RouteGroup&#x7684;&#x83B7;&#x53D6;</h3>
<ul>
<li>Engine&#x5D4C;&#x5165;&#x4E86;RouteGroup&#xFF0C;&#x5B83;&#x672C;&#x8EAB;&#x5C31;&#x5B9E;&#x73B0;&#x4E86;IRoutes&#x63A5;&#x53E3;&#xFF0C;gin.New() &#x548C; gin.Default() &#x53EF;&#x4EE5;&#x5F97;&#x5230;Engine&#x5BF9;&#x8C61;</li>
<li>Engine.Group(relativePath string, handlers ...HandlerFunc)&#x53EF;&#x4EE5;&#x5F97;&#x5230;&#x4E00;&#x4E2A;&#x65B0;&#x7684;RouteGroup</li>
</ul>
<h3 id="&#x8DEF;&#x7531;&#x7684;&#x547D;&#x4E2D;"><a name="&#x8DEF;&#x7531;&#x7684;&#x547D;&#x4E2D;" class="anchor-navigation-ex-anchor" href="#&#x8DEF;&#x7531;&#x7684;&#x547D;&#x4E2D;"><i class="fa fa-link" aria-hidden="true"></i></a>1.1.3. &#x8DEF;&#x7531;&#x7684;&#x547D;&#x4E2D;</h3>
<p>&#x521D;&#x59CB;&#x5316;&#x65F6;&#x5C06; <code>gin.go:handleHTTPRequest</code> &#x8BBE;&#x7F6E;&#x4E3A;http&#x8BF7;&#x6C42;&#x7684;&#x5904;&#x7406;&#x8005;&#xFF0C;&#x5B83;&#x4F1A;&#x5C06;&#x8BF7;&#x6C42;&#x8FDB;&#x884C;&#x9884;&#x5904;&#x7406;&#x540E;&#x53BB;&#x5904;&#x67E5;&#x627E;&#x547D;&#x4E2D;&#x7684;&#x5904;&#x7406;&#x8005;&#xFF08;&#x5217;&#x8868;&#xFF09;&#xFF0C;&#x7136;&#x540E;&#x53BB;&#x6267;&#x884C;&#x3002; 
&#x8FD9;&#x4E2A;&#x662F;&#x8C03;&#x7528;&#x903B;&#x8F91;&#xFF0C;&#x6211;&#x4EEC;&#x8BB2;&#x5177;&#x4F53;&#x5B9E;&#x73B0;&#x3002;</p>
<h2 id="&#x8DEF;&#x7531;&#x7684;&#x8C03;&#x7528;&#x903B;&#x8F91;"><a name="&#x8DEF;&#x7531;&#x7684;&#x8C03;&#x7528;&#x903B;&#x8F91;" class="anchor-navigation-ex-anchor" href="#&#x8DEF;&#x7531;&#x7684;&#x8C03;&#x7528;&#x903B;&#x8F91;"><i class="fa fa-link" aria-hidden="true"></i></a>1.2. &#x8DEF;&#x7531;&#x7684;&#x8C03;&#x7528;&#x903B;&#x8F91;</h2>
<h3 id="&#x80CC;&#x666F;&#x77E5;&#x8BC6;"><a name="&#x80CC;&#x666F;&#x77E5;&#x8BC6;" class="anchor-navigation-ex-anchor" href="#&#x80CC;&#x666F;&#x77E5;&#x8BC6;"><i class="fa fa-link" aria-hidden="true"></i></a>1.2.1. &#x80CC;&#x666F;&#x77E5;&#x8BC6;</h3>
<p>&#x6211;&#x4EEC;&#x5148;&#x770B; <code>Engine</code> &#x7ED3;&#x6784;&#x4F53;&#x548C;&#x8DEF;&#x7531;&#x6709;&#x5173;&#x7684;&#x5B57;&#x6BB5;</p>
<pre><code>gin.go:50

type Engine struct {
    RouterGroup

    // &#x5982;&#x679C;true&#xFF0C;&#x5F53;&#x524D;&#x8DEF;&#x7531;&#x5339;&#x914D;&#x5931;&#x8D25;&#x4F46;&#x5C06;&#x8DEF;&#x5F84;&#x6700;&#x540E;&#x7684; / &#x53BB;&#x6389;&#x65F6;&#x5339;&#x914D;&#x6210;&#x529F;&#x65F6;&#x81EA;&#x52A8;&#x5339;&#x914D;&#x540E;&#x8005;
    // &#x6BD4;&#x5982;&#xFF1A;&#x8BF7;&#x6C42;&#x662F; /foo/ &#x4F46;&#x6CA1;&#x6709;&#x547D;&#x4E2D;&#xFF0C;&#x800C;&#x5B58;&#x5728; /foo&#xFF0C;
    // &#x5BF9;get method&#x8BF7;&#x6C42;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x4F1A;&#x88AB;301&#x91CD;&#x5B9A;&#x5411;&#x5230; /foo
    // &#x5BF9;&#x4E8E;&#x5176;&#x4ED6;method&#x8BF7;&#x6C42;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x4F1A;&#x88AB;307&#x91CD;&#x5B9A;&#x5411;&#x5230; /foo
    RedirectTrailingSlash bool

    // &#x5982;&#x679C;true&#xFF0C;&#x5728;&#x6CA1;&#x6709;&#x5904;&#x7406;&#x8005;&#x88AB;&#x6CE8;&#x518C;&#x6765;&#x5904;&#x7406;&#x5F53;&#x524D;&#x8BF7;&#x6C42;&#x65F6;router&#x5C06;&#x5C1D;&#x8BD5;&#x4FEE;&#x590D;&#x5F53;&#x524D;&#x8BF7;&#x6C42;&#x8DEF;&#x5F84;
    // &#x903B;&#x8F91;&#x4E3A;&#xFF1A;
    // - &#x79FB;&#x9664;&#x524D;&#x9762;&#x7684; ../ &#x6216;&#x8005; //
    // - &#x5BF9;&#x65B0;&#x7684;&#x8DEF;&#x5F84;&#x8FDB;&#x884C;&#x5927;&#x5C0F;&#x5199;&#x4E0D;&#x654F;&#x611F;&#x7684;&#x67E5;&#x8BE2;
    // &#x5982;&#x679C;&#x627E;&#x5230;&#x4E86;&#x5904;&#x7406;&#x8005;&#xFF0C;&#x8BF7;&#x6C42;&#x4F1A;&#x88AB;301&#x6216;307&#x91CD;&#x5B9A;&#x5411;
    // &#x6BD4;&#x5982;&#xFF1A; /FOO &#x548C; /..//FOO &#x4F1A;&#x88AB;&#x91CD;&#x5B9A;&#x5411;&#x5230; /foo
    // RedirectTrailingSlash &#x53C2;&#x6570;&#x548C;&#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#x72EC;&#x7ACB;
    RedirectFixedPath bool

    // &#x5982;&#x679C;true&#xFF0C;&#x5F53;&#x8DEF;&#x7531;&#x6CA1;&#x6709;&#x88AB;&#x547D;&#x4E2D;&#x65F6;&#xFF0C;&#x53BB;&#x68C0;&#x67E5;&#x662F;&#x5426;&#x6709;&#x5176;&#x4ED6;method&#x547D;&#x4E2D;
    //  &#x5982;&#x679C;&#x547D;&#x4E2D;&#xFF0C;&#x54CD;&#x5E94;405 &#xFF08;Method Not Allowed&#xFF09;
    //  &#x5982;&#x679C;&#x6CA1;&#x6709;&#x547D;&#x4E2D;&#xFF0C;&#x8BF7;&#x6C42;&#x5C06;&#x7531; NotFound handler &#x6765;&#x5904;&#x7406;
    HandleMethodNotAllowed bool

    // &#x5982;&#x679C;true&#xFF0C; url.RawPath &#x4F1A;&#x88AB;&#x7528;&#x6765;&#x67E5;&#x627E;&#x53C2;&#x6570;
    UseRawPath bool

    // &#x5982;&#x679C;true&#xFF0C; path value &#x4F1A;&#x88AB;&#x4FDD;&#x7559;
    // &#x5982;&#x679C; UseRawPath&#x662F;false(&#x9ED8;&#x8BA4;)&#xFF0C;UnescapePathValues&#x4E3A;true
    // url.Path&#x4F1A;&#x88AB;&#x4FDD;&#x7559;&#x5E76;&#x4F7F;&#x7528;
    UnescapePathValues bool

    allNoRoute       HandlersChain
    allNoMethod      HandlersChain
    noRoute          HandlersChain
    noMethod         HandlersChain

    //&#x6BCF;&#x4E2A;http method&#x5BF9;&#x5E94;&#x4E00;&#x68F5;&#x6811;
    trees            methodTrees
}

// gin.go:30
type HandlerFunc func(*Context)
type HandlersChain []HandlerFunc

// routergroup.go:40
type RouterGroup struct {
    // &#x8FD9;&#x4E2A;&#x8DEF;&#x7531;&#x4F1A;&#x53C2;&#x4E0E;&#x5904;&#x7406;&#x7684;&#x51FD;&#x6570;&#x5217;&#x8868;
    Handlers HandlersChain
    basePath string
    // &#x5355;&#x4F8B;&#x5B58;&#x5728;
    engine   *Engine
    // &#x662F;&#x5426;&#x662F;&#x6839;
    root     bool
}
</code></pre><h3 id="&#x6DFB;&#x52A0;&#x8DEF;&#x7531;"><a name="&#x6DFB;&#x52A0;&#x8DEF;&#x7531;" class="anchor-navigation-ex-anchor" href="#&#x6DFB;&#x52A0;&#x8DEF;&#x7531;"><i class="fa fa-link" aria-hidden="true"></i></a>1.2.2. &#x6DFB;&#x52A0;&#x8DEF;&#x7531;</h3>
<pre><code>// routergroup.go:70
func (group *RouterGroup) handle(httpMethod, relativePath string, handlers HandlersChain) IRoutes {
    // &#x5C06;basePath&#x548C;relativePath&#x52A0;&#x8D77;&#x6765;&#x5F97;&#x5230;&#x6700;&#x7EC8;&#x7684;&#x8DEF;&#x5F84;
    absolutePath := group.calculateAbsolutePath(relativePath)
    // &#x5C06;&#x73B0;&#x6709;&#x7684; Handlers &#x548C; handlers&#x5408;&#x5E76;&#x8D77;&#x6765;
    handlers = group.combineHandlers(handlers)
    // &#x5C06;&#x8FD9;&#x4E2A;route&#x52A0;&#x5165;&#x5230;engine.tree
    group.engine.addRoute(httpMethod, absolutePath, handlers)
    // &#x8FD4;&#x56DE;
    return group.returnObj()
}
</code></pre><p>&#x4E0A;&#x9762;&#x7684; <code>addRoute()</code> &#x7684;&#x5B9E;&#x73B0;&#xFF1A;</p>
<pre><code>func (engine *Engine) addRoute(method, path string, handlers HandlersChain) {
    // &#x5E38;&#x89C4;&#x68C0;&#x67E5;
    assert1(path[0] == &apos;/&apos;, &quot;path must begin with &apos;/&apos;&quot;)
    assert1(method != &quot;&quot;, &quot;HTTP method can not be empty&quot;)
    assert1(len(handlers) &gt; 0, &quot;there must be at least one handler&quot;)

    debugPrintRoute(method, path, handlers)
    // &#x7EF4;&#x62A4;engine.trees
    root := engine.trees.get(method)
    if root == nil {
    root = new(node)
    engine.trees = append(engine.trees, methodTree{method: method, root: root})
    }

    // &#x6838;&#x5FC3;&#xFF0C;&#x540E;&#x9762;&#x4E00;&#x8D77;&#x6765;&#x8BB2;
    root.addRoute(path, handlers)
}
</code></pre><h3 id="&#x67E5;&#x627E;&#x8DEF;&#x7531;"><a name="&#x67E5;&#x627E;&#x8DEF;&#x7531;" class="anchor-navigation-ex-anchor" href="#&#x67E5;&#x627E;&#x8DEF;&#x7531;"><i class="fa fa-link" aria-hidden="true"></i></a>1.2.3. &#x67E5;&#x627E;&#x8DEF;&#x7531;</h3>
<p>&#x6211;&#x4EEC;&#x770B;&#x770B;&#x8DEF;&#x7531;&#x67E5;&#x627E;&#x903B;&#x8F91;&#xFF1A;</p>
<pre><code>gin.go:340

func (engine *Engine) handleHTTPRequest(c *Context) {
    httpMethod := c.Request.Method
    path := c.Request.URL.Path
    unescape := false
    // &#x770B;&#x662F;&#x5426;&#x4F7F;&#x7528; RawPath
    if engine.UseRawPath &amp;&amp; len(c.Request.URL.RawPath) &gt; 0 {
        path = c.Request.URL.RawPath
        unescape = engine.UnescapePathValues
    }

    t := engine.trees
    // &#x6839;&#x636E; http method &#x5F97;&#x5230;&#x76EE;&#x6807;&#x6811;
    for i, tl := 0, len(t); i &lt; tl; i++ {
        if t[i].method == httpMethod {
            // &#x76EE;&#x6807;&#x6811;&#x627E;&#x5230;&#x4E86;&#xFF0C;&#x4E3A;&#x672C;&#x6B21;&#x8BF7;&#x6C42;&#x8DEF;&#x7531;&#x6811;&#x7684;&#x6839;&#x8282;&#x70B9;
            root := t[i].root
            // &#x6839;&#x636E;path&#x67E5;&#x627E;&#x8282;&#x70B9;
            // &#x6838;&#x5FC3;&#xFF0C;&#x540E;&#x9762;&#x6765;&#x8BB2;
            handlers, params, tsr := root.getValue(path, c.Params, unescape)
            if handlers != nil {
                c.handlers = handlers
                c.Params = params
                c.Next()
                c.writermem.WriteHeaderNow()
                return
            }


            if httpMethod != &quot;CONNECT&quot; &amp;&amp; path != &quot;/&quot; {
                // &#x5982;&#x679C; trailing slash redirect&#xFF0C;&#x5C31;&#x91CD;&#x5B9A;&#x5411;&#x51FA;&#x53BB;
                if tsr &amp;&amp; engine.RedirectTrailingSlash {
                    redirectTrailingSlash(c)
                    return
                }

                // fix path
                if engine.RedirectFixedPath &amp;&amp; redirectFixedPath(c, root, engine.RedirectFixedPath) {
                    return
                }
            }
            // &#x6CA1;&#x627E;&#x5230;
            break
        }
    }

    // &#x5982;&#x679C;&#x662F;&#x56E0;&#x4E3A;HTTP method&#x6709;&#x8BEF;&#xFF0C;&#x56DE;&#x590D;&#x8FD9;&#x4E2A;
    if engine.HandleMethodNotAllowed {
        for _, tree := range engine.trees {
            if tree.method != httpMethod {
                if handlers, _, _ := tree.root.getValue(path, nil, unescape); handlers != nil {
                    c.handlers = engine.allNoMethod
                    serveError(c, 405, default405Body)
                    return
                }
            }
        }
    }

    // &#x4EA4;&#x7ED9; NotRoute &#xFF08;404&#xFF09;
    c.handlers = engine.allNoRoute
    serveError(c, 404, default404Body)
}
</code></pre>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="0200.html" class="navigation navigation-prev " aria-label="Previous page: 路由">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="0202_radix_tree.html" class="navigation navigation-next " aria-label="Next page: 路由内部实现：基树">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"路由调用逻辑","level":"1.3.1","depth":2,"next":{"title":"路由内部实现：基树","level":"1.3.2","depth":2,"path":"0202_radix_tree.md","ref":"0202_radix_tree.md","articles":[]},"previous":{"title":"路由","level":"1.3","depth":1,"path":"0200.md","ref":"0200.md","articles":[{"title":"路由调用逻辑","level":"1.3.1","depth":2,"path":"0201_router.md","ref":"0201_router.md","articles":[]},{"title":"路由内部实现：基树","level":"1.3.2","depth":2,"path":"0202_radix_tree.md","ref":"0202_radix_tree.md","articles":[]}]},"dir":"ltr"},"config":{"plugins":["highlight","codesnippet","splitter","ximu-foot","pageview-count","expandable-chapters","anchor-navigation-ex","-sharing","-livereload"],"root":"../../../code_analysis/gin-gonic_gin/","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"ximu-foot":{},"splitter":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"codesnippet":{},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"anchor-navigation-ex":{"showLevel":true,"associatedWithSummary":true,"mode":"float","showGoTop":true,"printLog":false,"multipleH1":true,"float":{"floatIcon":"fa fa-navicon","showLevelIcon":false,"level1Icon":"","level2Icon":"","level3Icon":""},"pageTop":{"showLevelIcon":false,"level1Icon":"","level2Icon":"","level3Icon":""}},"pageview-count":{},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"expandable-chapters":{}},"theme":"default","author":"刘青, http://liuximu.com","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"gitbook":"*","description":"gin 框架源码分析"},"file":{"path":"0201_router.md","mtime":"2019-12-15T11:27:09.052Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-12-15T16:09:11.808Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-pageview-count/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

